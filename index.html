<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8" />
    <title>Digitaler Befehl - Darstellungstest</title>

    <!-- wichtig für Mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <style>
        body {
            font-family: system-ui, sans-serif;
            padding: 16px;
        }

        .error {
            background: #ffe5e5;
            color: #900;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
        }

        .ok {
            background: #e6ffea;
            color: #064;
            padding: 16px;
            border-radius: 8px;
        }

        code {
            background: #f4f4f4;
            padding: 4px 6px;
            border-radius: 4px;
        }

        .requirement-box {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 16px;
            margin-top: 12px;
            background: #fafafa;
        }

        .requirement-box h2 {
            margin-top: 0;
        }

        .requirement-box h3 {
            margin-bottom: 4px;
            margin-top: 16px;
            font-size: 1rem;
        }

        .requirement-box p {
            margin-top: 0;
            margin-bottom: 8px;
        }

        .req-source a {
            word-break: break-all;
        }
    </style>
</head>

<body>
    <h1>Digitaler Befehl - Darstellungstest</h1>

    <section class="requirement-box" aria-labelledby="req-title">
        <h2 id="req-title">Anforderung</h2>

        <p class="req-text">
            Das Endgerät muss eine Mindestbildschirmgröße nach Skalierung von
            360px(dp) besitzen. [...]
        </p>

        <h3>Test</h3>
        <p class="req-test">
            Die Viewport-Breite wird zur Laufzeit über <code>window.innerWidth</code> ermittelt.
            Unterschreitet der Wert 360 CSS-Pixel, wird die Anwendung nicht dargestellt.
        </p>

        <h3>Quelle</h3>
        <p class="req-source">
            <a href="https://www.dbinfrago.com/resource/blob/12592964/ffbbffe6d4012840ede8256cd5f4d08e/Anforderungen-an-Tf-Endgeraet_Digitaler_Befehl-data.pdf"
                target="_blank" rel="noopener noreferrer">
                Anforderungen an die Beschaffenheit der Triebfahrzeugführer-Endgeräte
            </a>
        </p>

        <h3>Stand</h3>
        <p class="req-date">
            24.04.2025
        </p>
    </section>

    <div id="app"></div>

    <script>
        const app = document.getElementById("app");

        function render() {
            const innerWidth = window.innerWidth;
            const clientWidth = document.documentElement.clientWidth;
            const visualWidth = window.visualViewport?.width;

            const isTooSmall = innerWidth < 360;

            app.innerHTML = `
          ${isTooSmall
                    ? `<div class="error">
                   ❌ Darstellung zu klein (< 360px)
                 </div>`
                    : `<div class="ok">
                   ✅ Darstellung OK
                 </div>`
                }

          <p><strong>Messwerte:</strong></p>
          <ul>
            <li>window.innerWidth: <code>${innerWidth}</code></li>
            <li>documentElement.clientWidth: <code>${clientWidth}</code></li>
            <li>visualViewport.width: <code>${visualWidth ?? "n/a"}</code></li>
            <li>devicePixelRatio: <code>${window.devicePixelRatio}</code></li>
          </ul>
          <p class="hint">
              Hinweis: Wenn <code>innerWidth</code> z. B. bei 100% Zoom unter 360 liegt (wie 339),
              triggert der Check. Bei geringerem Zoom kann der Wert über 360 steigen.
            </p>
        `;
        }

        render();
        window.addEventListener("resize", render);
    </script>
</body>

</html>
